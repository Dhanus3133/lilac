{
  "db_name": "PostgreSQL",
  "query": "\n            INSERT INTO cluster_nodes (node_id, cluster_id, node_status, heartbeat_timestamp, memory_mb, cpu, gpu, reported_job_id)\n                VALUES ($1, $2, $3, $4, $5, $6, $7, $8)\n                ON CONFLICT (node_id) DO UPDATE SET\n                    node_status = EXCLUDED.node_status,\n                    heartbeat_timestamp = EXCLUDED.heartbeat_timestamp,\n                    reported_job_id = EXCLUDED.reported_job_id,\n                    updated_at = NOW()\n                RETURNING node_id, cluster_id, node_status as \"node_status: NodeStatusRecord\", heartbeat_timestamp, memory_mb, cpu as \"cpu: CpuConfigurationRecord\", gpu as \"gpu: GpuConfigurationRecord\", created_at, updated_at, assigned_job_id, reported_job_id;\n            ",
  "describe": {
    "columns": [
      {
        "ordinal": 0,
        "name": "node_id",
        "type_info": "Uuid"
      },
      {
        "ordinal": 1,
        "name": "cluster_id",
        "type_info": "Uuid"
      },
      {
        "ordinal": 2,
        "name": "node_status: NodeStatusRecord",
        "type_info": {
          "Custom": {
            "name": "node_status",
            "kind": {
              "Enum": [
                "available",
                "busy"
              ]
            }
          }
        }
      },
      {
        "ordinal": 3,
        "name": "heartbeat_timestamp",
        "type_info": "Timestamptz"
      },
      {
        "ordinal": 4,
        "name": "memory_mb",
        "type_info": "Int4"
      },
      {
        "ordinal": 5,
        "name": "cpu: CpuConfigurationRecord",
        "type_info": {
          "Custom": {
            "name": "cpu_configuration",
            "kind": {
              "Composite": [
                [
                  "manufacturer",
                  {
                    "Custom": {
                      "name": "cpu_manufacturer",
                      "kind": {
                        "Enum": [
                          "Intel",
                          "AMD",
                          "AWS"
                        ]
                      }
                    }
                  }
                ],
                [
                  "architecture",
                  {
                    "Custom": {
                      "name": "architecture",
                      "kind": {
                        "Enum": [
                          "arm64",
                          "arm64-mac",
                          "i386",
                          "x86_64",
                          "x86_64-mac"
                        ]
                      }
                    }
                  }
                ],
                [
                  "millicores",
                  "Int4"
                ]
              ]
            }
          }
        }
      },
      {
        "ordinal": 6,
        "name": "gpu: GpuConfigurationRecord",
        "type_info": {
          "Custom": {
            "name": "gpu_configuration",
            "kind": {
              "Composite": [
                [
                  "manufacturer",
                  {
                    "Custom": {
                      "name": "gpu_manufacturer",
                      "kind": {
                        "Enum": [
                          "Nvidia",
                          "AMD",
                          "Habana"
                        ]
                      }
                    }
                  }
                ],
                [
                  "model_name",
                  {
                    "Custom": {
                      "name": "gpu_model",
                      "kind": {
                        "Enum": [
                          "Radeon Pro V520",
                          "Gaudi HL-205",
                          "A100",
                          "A10G",
                          "B200",
                          "H100",
                          "H200",
                          "L4",
                          "L40S",
                          "T4",
                          "T4g",
                          "V100"
                        ]
                      }
                    }
                  }
                ],
                [
                  "memory_mb",
                  "Int4"
                ],
                [
                  "count",
                  "Int4"
                ]
              ]
            }
          }
        }
      },
      {
        "ordinal": 7,
        "name": "created_at",
        "type_info": "Timestamptz"
      },
      {
        "ordinal": 8,
        "name": "updated_at",
        "type_info": "Timestamptz"
      },
      {
        "ordinal": 9,
        "name": "assigned_job_id",
        "type_info": "Uuid"
      },
      {
        "ordinal": 10,
        "name": "reported_job_id",
        "type_info": "Uuid"
      }
    ],
    "parameters": {
      "Left": [
        "Uuid",
        "Uuid",
        {
          "Custom": {
            "name": "node_status",
            "kind": {
              "Enum": [
                "available",
                "busy"
              ]
            }
          }
        },
        "Timestamptz",
        "Int4",
        {
          "Custom": {
            "name": "cpu_configuration",
            "kind": {
              "Composite": [
                [
                  "manufacturer",
                  {
                    "Custom": {
                      "name": "cpu_manufacturer",
                      "kind": {
                        "Enum": [
                          "Intel",
                          "AMD",
                          "AWS"
                        ]
                      }
                    }
                  }
                ],
                [
                  "architecture",
                  {
                    "Custom": {
                      "name": "architecture",
                      "kind": {
                        "Enum": [
                          "arm64",
                          "arm64-mac",
                          "i386",
                          "x86_64",
                          "x86_64-mac"
                        ]
                      }
                    }
                  }
                ],
                [
                  "millicores",
                  "Int4"
                ]
              ]
            }
          }
        },
        {
          "Custom": {
            "name": "gpu_configuration",
            "kind": {
              "Composite": [
                [
                  "manufacturer",
                  {
                    "Custom": {
                      "name": "gpu_manufacturer",
                      "kind": {
                        "Enum": [
                          "Nvidia",
                          "AMD",
                          "Habana"
                        ]
                      }
                    }
                  }
                ],
                [
                  "model_name",
                  {
                    "Custom": {
                      "name": "gpu_model",
                      "kind": {
                        "Enum": [
                          "Radeon Pro V520",
                          "Gaudi HL-205",
                          "A100",
                          "A10G",
                          "B200",
                          "H100",
                          "H200",
                          "L4",
                          "L40S",
                          "T4",
                          "T4g",
                          "V100"
                        ]
                      }
                    }
                  }
                ],
                [
                  "memory_mb",
                  "Int4"
                ],
                [
                  "count",
                  "Int4"
                ]
              ]
            }
          }
        },
        "Uuid"
      ]
    },
    "nullable": [
      false,
      false,
      false,
      false,
      false,
      false,
      true,
      false,
      false,
      true,
      true
    ]
  },
  "hash": "16610462dd1590020614a065d855505cdfe1f24175cee21b96126003f5fc9cde"
}
